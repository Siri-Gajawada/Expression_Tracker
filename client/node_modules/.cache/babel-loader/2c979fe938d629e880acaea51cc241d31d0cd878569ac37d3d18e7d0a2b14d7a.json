{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sirig\\\\OneDrive\\\\Desktop\\\\ps\\\\expression_tracker(proper)\\\\client\\\\src\\\\components\\\\AdminApp\\\\AdminApp.js\",\n  _s = $RefreshSig$();\n// import React, { useState, useEffect } from 'react';\n// import { Pie } from 'react-chartjs-2'; // Changed Bar to Pie component\n// import 'chart.js/auto'; // Import auto to handle chart.js registration\n\n// function AdminApp() {\n//   const [sessions, setSessions] = useState([]);\n//   const [selectedSession, setSelectedSession] = useState(null);\n//   const [analysisData, setAnalysisData] = useState(null);\n\n//   useEffect(() => {\n//     fetchSessions();\n//   }, []);\n\n//   const fetchSessions = async () => {\n//     try {\n//       const response = await fetch('http://localhost:5000/sessions');\n//       if (!response.ok) {\n//         throw new Error('Network response was not ok');\n//       }\n//       const data = await response.json();\n//       setSessions(data.sessions);\n//     } catch (error) {\n//       console.error('Error fetching sessions:', error);\n//     }\n//   };\n\n//   const handleSessionClick = async (sessionId) => {\n//     setSelectedSession(sessionId);\n//     try {\n//       const response = await fetch(`http://localhost:5000/analyze/${sessionId}`);\n//       if (!response.ok) {\n//         throw new Error('Network response was not ok');\n//       }\n//       const data = await response.json();\n//       setAnalysisData(data);\n//     } catch (error) {\n//       console.error('Error analyzing session:', error);\n//     }\n//   };\n\n//   const handleBackToSessions = () => {\n//     setSelectedSession(null);\n//     setAnalysisData(null);\n//   };\n\n//   const renderTable = () => {\n//     if (!analysisData || !analysisData.imageAnalyses) return null;\n\n//     return (\n//       <div style={{ overflowX: 'auto', marginTop: '20px' }}> {/* Enable horizontal scrolling */}\n//         <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd' }}>\n//           <thead>\n//             <tr>\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Webcam Capture</th>\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Game Screenshot</th>\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Analysis</th>\n//             </tr>\n//           </thead>\n//           <tbody>\n//             {analysisData.imageAnalyses.map((analysis, index) => (\n//               <tr key={index} style={{ borderBottom: '1px solid #ddd' }}>\n//                 <td style={{ border: '1px solid #ddd', padding: '12px', textAlign: 'center' }}>\n//                   <img \n//                     src={`http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath}`} \n//                     srcSet={`http://localhost:5000/uploads/webcam_images/${selectedSession}/small/${analysis.imagePath} 200w,\n//                              http://localhost:5000/uploads/webcam_images/${selectedSession}/medium/${analysis.imagePath} 400w,\n//                              http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath} 800w`}\n//                     sizes=\"(max-width: 400px) 200px, (max-width: 800px) 400px, 800px\"\n//                     alt={`Webcam ${index}`} \n//                     style={{ width: '100%', height: 'auto', borderRadius: '5px' }}\n//                     loading=\"lazy\" \n//                   />\n//                 </td>\n\n//                 <td style={{ border: '1px solid #ddd', padding: '12px', textAlign: 'center' }}>\n//                   <img \n//                     src={`http://localhost:5000/uploads/game_screenshots/${selectedSession}/screenshot_${index}.png`} \n//                     srcSet={`http://localhost:5000/uploads/game_screenshots/${selectedSession}/small/screenshot_${index}.png 200w,\n//                              http://localhost:5000/uploads/game_screenshots/${selectedSession}/medium/screenshot_${index}.png 400w,\n//                              http://localhost:5000/uploads/game_screenshots/${selectedSession}/screenshot_${index}.png 800w`}\n//                     sizes=\"(max-width: 400px) 200px, (max-width: 800px) 400px, 800px\"\n//                     alt={`Game Screenshot ${index}`} \n//                     style={{ width: '100%', height: 'auto', borderRadius: '5px' }}\n//                     loading=\"lazy\" \n//                   />\n//                 </td>\n\n//                 <td style={{ border: '1px solid #ddd', padding: '12px' }}>\n//                   {Object.entries(analysis.emotions).map(([emotion, value]) => (\n//                     <p key={emotion} style={{ margin: '5px 0' }}>{emotion}: {parseFloat(value).toFixed(2)}%</p>\n//                   ))}\n//                 </td>\n//               </tr>\n//             ))}\n//           </tbody>\n//         </table>\n//       </div>\n//     );\n//   };\n\n//   const renderPieChart = () => {\n//     if (!analysisData || !analysisData.overallAnalysis) return null;\n\n//     const emotions = analysisData.overallAnalysis.emotions;\n//     const data = {\n//       labels: Object.keys(emotions),\n//       datasets: [{\n//         label: 'Emotion Analysis (%)',\n//         data: Object.values(emotions).map(v => parseFloat(v)),\n//         backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],\n//       }]\n//     };\n\n//     const options = {\n//       responsive: true,\n//       plugins: {\n//         legend: {\n//           position: 'top',\n//         },\n//       },\n//     };\n\n//     return (\n//       <div style={{ width: '60%', margin: '0 auto' }}>\n//         <h3 style={{ textAlign: 'center' }}>Overall Emotion Analysis</h3>\n//         <Pie data={data} options={options} />\n//       </div>\n//     );\n//   };\n\n//   return (\n//     <div style={{ padding: '20px', maxHeight: '100vh', overflowY: 'auto' }}> {/* Added maxHeight and overflowY */}\n//       <h2>Admin Dashboard</h2>\n\n//       {/* Pie Chart for Overall Emotion Analysis */}\n//       {renderPieChart()}\n\n//       <div style={{ display: 'flex', marginTop: '40px' }}>\n//         {selectedSession ? (\n//           <div style={{ width: '100%' }}>\n//             <h3>Analysis for Session: {selectedSession}</h3>\n//             {renderTable()}\n\n//             {/* Back to Sessions Button */}\n//             <button \n//               onClick={handleBackToSessions} \n//               style={{\n//                 backgroundColor: '#A2C2E2', // Pastel blue color\n//                 color: '#fff',\n//                 padding: '10px 15px',\n//                 border: 'none',\n//                 borderRadius: '5px',\n//                 cursor: 'pointer',\n//                 marginTop: '20px',\n//                 display: 'block',\n//                 marginLeft: 'auto',\n//                 marginRight: 'auto'\n//               }}\n//             >\n//               Back to Sessions\n//             </button>\n//           </div>\n//         ) : (\n//           <div style={{ width: '30%', marginRight: '20px' }}>\n//             <h3>Sessions</h3>\n//             <ul style={{ listStyleType: 'none', padding: 0 }}>\n//               {sessions.map((session) => (\n//                 <li \n//                   key={session} \n//                   onClick={() => handleSessionClick(session)}\n//                   style={{ cursor: 'pointer', padding: '10px', border: '1px solid #ddd', marginBottom: '5px' }}\n//                 >\n//                   {session}\n//                 </li>\n//               ))}\n//             </ul>\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default AdminApp;\n\nimport React, { useState, useEffect } from 'react';\nimport { Pie } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminApp() {\n  _s();\n  const [sessions, setSessions] = useState([]);\n  const [sessionDates, setSessionDates] = useState({});\n  const [selectedSession, setSelectedSession] = useState(null);\n  const [analysisData, setAnalysisData] = useState(null);\n  useEffect(() => {\n    fetchSessions();\n  }, []);\n  const fetchSessions = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/sessions');\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      setSessions(data.sessions);\n      setSessionDates(data.sessionDates || {});\n    } catch (error) {\n      console.error('Error fetching sessions:', error);\n    }\n  };\n  const handleSessionClick = async sessionId => {\n    setSelectedSession(sessionId);\n    try {\n      const response = await fetch(`http://localhost:5000/analyze/${sessionId}`);\n      if (!response.ok) {\n        if (response.status === 404) {\n          setAnalysisData({\n            imageAnalyses: [],\n            overallAnalysis: {\n              emotions: {}\n            }\n          });\n        } else {\n          throw new Error('Network response was not ok');\n        }\n      }\n      const data = await response.json();\n      setAnalysisData(data);\n    } catch (error) {\n      console.error('Error analyzing session:', error);\n    }\n  };\n  const handleBackToSessions = () => {\n    setSelectedSession(null);\n    setAnalysisData(null);\n  };\n  const formatDate = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleString();\n  };\n  const renderTable = () => {\n    if (!analysisData || analysisData.imageAnalyses.length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        overflowX: 'auto',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse',\n          border: '1px solid #ddd'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ddd',\n                padding: '12px',\n                backgroundColor: '#f2f2f2',\n                textAlign: 'center'\n              },\n              children: \"Webcam Capture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ddd',\n                padding: '12px',\n                backgroundColor: '#f2f2f2',\n                textAlign: 'center'\n              },\n              children: \"Analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: analysisData.imageAnalyses.map((analysis, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              borderBottom: '1px solid #ddd'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ddd',\n                padding: '12px',\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath}`,\n                alt: `Webcam ${index}`,\n                style: {\n                  width: '200px',\n                  height: 'auto',\n                  borderRadius: '5px'\n                },\n                loading: \"lazy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ddd',\n                padding: '12px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  backgroundColor: '#f8f9fa',\n                  padding: '10px',\n                  borderRadius: '5px',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    margin: '0 0 10px 0',\n                    color: '#333'\n                  },\n                  children: \"Emotion Analysis:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this), Object.entries(analysis.emotions).map(([emotion, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    margin: '5px 0',\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    padding: '3px 0'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      textTransform: 'capitalize'\n                    },\n                    children: [emotion, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontWeight: '500'\n                    },\n                    children: [parseFloat(value).toFixed(2), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 25\n                  }, this)]\n                }, emotion, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: '10px',\n                    paddingTop: '10px',\n                    borderTop: '1px solid #dee2e6'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Dominant Emotion: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: '#007bff',\n                      textTransform: 'capitalize'\n                    },\n                    children: analysis.dominantEmotion\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this);\n  };\n  const renderPieChart = () => {\n    if (!analysisData || !analysisData.overallAnalysis || Object.keys(analysisData.overallAnalysis.emotions).length === 0) return null;\n    const emotions = analysisData.overallAnalysis.emotions;\n    const data = {\n      labels: Object.keys(emotions).map(emotion => emotion.charAt(0).toUpperCase() + emotion.slice(1)),\n      datasets: [{\n        data: Object.values(emotions).map(v => parseFloat(v)),\n        backgroundColor: ['#FF6384',\n        // red for angry\n        '#36A2EB',\n        // blue for sad\n        '#FFCE56',\n        // yellow for fear\n        '#4BC0C0',\n        // teal for happy\n        '#9966FF',\n        // purple for disgust\n        '#FF9F40',\n        // orange for surprise\n        '#C9CBCF' // gray for neutral\n        ],\n        borderWidth: 1\n      }]\n    };\n    const options = {\n      responsive: true,\n      plugins: {\n        legend: {\n          position: 'right',\n          labels: {\n            padding: 20,\n            font: {\n              size: 12\n            }\n          }\n        },\n        title: {\n          display: true,\n          text: 'Overall Emotion Distribution',\n          font: {\n            size: 16,\n            weight: 'bold'\n          },\n          padding: {\n            top: 10,\n            bottom: 30\n          }\n        }\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        maxWidth: '600px',\n        margin: '20px auto',\n        padding: '20px',\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n      },\n      children: /*#__PURE__*/_jsxDEV(Pie, {\n        data: data,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSessionsList = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      maxWidth: '400px',\n      marginRight: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '20px',\n        color: '#333',\n        borderBottom: '2px solid #007bff',\n        paddingBottom: '10px'\n      },\n      children: \"Local Sessions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '70vh',\n        overflowY: 'auto',\n        padding: '10px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '8px'\n      },\n      children: sessions.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          color: '#6c757d',\n          padding: '20px',\n          backgroundColor: 'white',\n          borderRadius: '4px',\n          margin: '10px 0'\n        },\n        children: \"No local sessions found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyleType: 'none',\n          padding: 0,\n          margin: 0\n        },\n        children: sessions.map(session => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handleSessionClick(session),\n          style: {\n            cursor: 'pointer',\n            padding: '15px',\n            backgroundColor: 'white',\n            borderRadius: '4px',\n            marginBottom: '10px',\n            boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\n            transition: 'all 0.2s ease',\n            border: '1px solid #dee2e6'\n          },\n          onMouseEnter: e => {\n            e.currentTarget.style.transform = 'translateY(-2px)';\n            e.currentTarget.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';\n          },\n          onMouseLeave: e => {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: '500',\n              color: '#007bff'\n            },\n            children: session\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }, this), sessionDates[session] && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.85em',\n              color: '#6c757d',\n              marginTop: '5px'\n            },\n            children: [\"Created: \", formatDate(sessionDates[session])]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 19\n          }, this)]\n        }, session, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 375,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '30px',\n      maxHeight: '100vh',\n      overflowY: 'auto',\n      backgroundColor: '#f0f2f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: '#2c3e50',\n        marginBottom: '30px',\n        textAlign: 'center'\n      },\n      children: \"Emotion Analysis Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: selectedSession ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%'\n        },\n        children: [renderPieChart(), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '20px 0',\n            color: '#2c3e50',\n            textAlign: 'center'\n          },\n          children: [\"Detailed Analysis for Session: \", selectedSession]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), renderTable(), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleBackToSessions,\n          style: {\n            backgroundColor: '#007bff',\n            color: '#fff',\n            padding: '10px 20px',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer',\n            marginTop: '20px',\n            display: 'block',\n            marginLeft: 'auto',\n            marginRight: 'auto',\n            transition: 'background-color 0.2s ease',\n            fontWeight: '500',\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n          },\n          onMouseOver: e => e.currentTarget.style.backgroundColor = '#0056b3',\n          onMouseOut: e => e.currentTarget.style.backgroundColor = '#007bff',\n          children: \"\\u2190 Back to Sessions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this) : renderSessionsList()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 446,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminApp, \"iefCTrs6TK/b1ICg9jAI8UO5rr4=\");\n_c = AdminApp;\nexport default AdminApp;\nvar _c;\n$RefreshReg$(_c, \"AdminApp\");","map":{"version":3,"names":["React","useState","useEffect","Pie","jsxDEV","_jsxDEV","AdminApp","_s","sessions","setSessions","sessionDates","setSessionDates","selectedSession","setSelectedSession","analysisData","setAnalysisData","fetchSessions","response","fetch","ok","Error","data","json","error","console","handleSessionClick","sessionId","status","imageAnalyses","overallAnalysis","emotions","handleBackToSessions","formatDate","dateString","date","Date","toLocaleString","renderTable","length","style","overflowX","marginTop","children","width","borderCollapse","border","padding","backgroundColor","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","map","analysis","index","borderBottom","src","imagePath","alt","height","borderRadius","loading","boxShadow","margin","color","Object","entries","emotion","value","display","justifyContent","textTransform","fontWeight","parseFloat","toFixed","paddingTop","borderTop","dominantEmotion","renderPieChart","keys","labels","charAt","toUpperCase","slice","datasets","values","v","borderWidth","options","responsive","plugins","legend","position","font","size","title","text","weight","top","bottom","maxWidth","renderSessionsList","marginRight","marginBottom","paddingBottom","maxHeight","overflowY","listStyleType","session","onClick","cursor","transition","onMouseEnter","e","currentTarget","transform","onMouseLeave","fontSize","flexDirection","alignItems","marginLeft","onMouseOver","onMouseOut","_c","$RefreshReg$"],"sources":["C:/Users/sirig/OneDrive/Desktop/ps/expression_tracker(proper)/client/src/components/AdminApp/AdminApp.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import { Pie } from 'react-chartjs-2'; // Changed Bar to Pie component\r\n// import 'chart.js/auto'; // Import auto to handle chart.js registration\r\n\r\n// function AdminApp() {\r\n//   const [sessions, setSessions] = useState([]);\r\n//   const [selectedSession, setSelectedSession] = useState(null);\r\n//   const [analysisData, setAnalysisData] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     fetchSessions();\r\n//   }, []);\r\n\r\n//   const fetchSessions = async () => {\r\n//     try {\r\n//       const response = await fetch('http://localhost:5000/sessions');\r\n//       if (!response.ok) {\r\n//         throw new Error('Network response was not ok');\r\n//       }\r\n//       const data = await response.json();\r\n//       setSessions(data.sessions);\r\n//     } catch (error) {\r\n//       console.error('Error fetching sessions:', error);\r\n//     }\r\n//   };\r\n\r\n//   const handleSessionClick = async (sessionId) => {\r\n//     setSelectedSession(sessionId);\r\n//     try {\r\n//       const response = await fetch(`http://localhost:5000/analyze/${sessionId}`);\r\n//       if (!response.ok) {\r\n//         throw new Error('Network response was not ok');\r\n//       }\r\n//       const data = await response.json();\r\n//       setAnalysisData(data);\r\n//     } catch (error) {\r\n//       console.error('Error analyzing session:', error);\r\n//     }\r\n//   };\r\n\r\n//   const handleBackToSessions = () => {\r\n//     setSelectedSession(null);\r\n//     setAnalysisData(null);\r\n//   };\r\n\r\n//   const renderTable = () => {\r\n//     if (!analysisData || !analysisData.imageAnalyses) return null;\r\n\r\n//     return (\r\n//       <div style={{ overflowX: 'auto', marginTop: '20px' }}> {/* Enable horizontal scrolling */}\r\n//         <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd' }}>\r\n//           <thead>\r\n//             <tr>\r\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Webcam Capture</th>\r\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Game Screenshot</th>\r\n//               <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Analysis</th>\r\n//             </tr>\r\n//           </thead>\r\n//           <tbody>\r\n//             {analysisData.imageAnalyses.map((analysis, index) => (\r\n//               <tr key={index} style={{ borderBottom: '1px solid #ddd' }}>\r\n//                 <td style={{ border: '1px solid #ddd', padding: '12px', textAlign: 'center' }}>\r\n//                   <img \r\n//                     src={`http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath}`} \r\n//                     srcSet={`http://localhost:5000/uploads/webcam_images/${selectedSession}/small/${analysis.imagePath} 200w,\r\n//                              http://localhost:5000/uploads/webcam_images/${selectedSession}/medium/${analysis.imagePath} 400w,\r\n//                              http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath} 800w`}\r\n//                     sizes=\"(max-width: 400px) 200px, (max-width: 800px) 400px, 800px\"\r\n//                     alt={`Webcam ${index}`} \r\n//                     style={{ width: '100%', height: 'auto', borderRadius: '5px' }}\r\n//                     loading=\"lazy\" \r\n//                   />\r\n//                 </td>\r\n                \r\n//                 <td style={{ border: '1px solid #ddd', padding: '12px', textAlign: 'center' }}>\r\n//                   <img \r\n//                     src={`http://localhost:5000/uploads/game_screenshots/${selectedSession}/screenshot_${index}.png`} \r\n//                     srcSet={`http://localhost:5000/uploads/game_screenshots/${selectedSession}/small/screenshot_${index}.png 200w,\r\n//                              http://localhost:5000/uploads/game_screenshots/${selectedSession}/medium/screenshot_${index}.png 400w,\r\n//                              http://localhost:5000/uploads/game_screenshots/${selectedSession}/screenshot_${index}.png 800w`}\r\n//                     sizes=\"(max-width: 400px) 200px, (max-width: 800px) 400px, 800px\"\r\n//                     alt={`Game Screenshot ${index}`} \r\n//                     style={{ width: '100%', height: 'auto', borderRadius: '5px' }}\r\n//                     loading=\"lazy\" \r\n//                   />\r\n//                 </td>\r\n\r\n//                 <td style={{ border: '1px solid #ddd', padding: '12px' }}>\r\n//                   {Object.entries(analysis.emotions).map(([emotion, value]) => (\r\n//                     <p key={emotion} style={{ margin: '5px 0' }}>{emotion}: {parseFloat(value).toFixed(2)}%</p>\r\n//                   ))}\r\n//                 </td>\r\n//               </tr>\r\n//             ))}\r\n//           </tbody>\r\n//         </table>\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n//   const renderPieChart = () => {\r\n//     if (!analysisData || !analysisData.overallAnalysis) return null;\r\n\r\n//     const emotions = analysisData.overallAnalysis.emotions;\r\n//     const data = {\r\n//       labels: Object.keys(emotions),\r\n//       datasets: [{\r\n//         label: 'Emotion Analysis (%)',\r\n//         data: Object.values(emotions).map(v => parseFloat(v)),\r\n//         backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],\r\n//       }]\r\n//     };\r\n\r\n//     const options = {\r\n//       responsive: true,\r\n//       plugins: {\r\n//         legend: {\r\n//           position: 'top',\r\n//         },\r\n//       },\r\n//     };\r\n\r\n//     return (\r\n//       <div style={{ width: '60%', margin: '0 auto' }}>\r\n//         <h3 style={{ textAlign: 'center' }}>Overall Emotion Analysis</h3>\r\n//         <Pie data={data} options={options} />\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px', maxHeight: '100vh', overflowY: 'auto' }}> {/* Added maxHeight and overflowY */}\r\n//       <h2>Admin Dashboard</h2>\r\n      \r\n//       {/* Pie Chart for Overall Emotion Analysis */}\r\n//       {renderPieChart()}\r\n\r\n//       <div style={{ display: 'flex', marginTop: '40px' }}>\r\n//         {selectedSession ? (\r\n//           <div style={{ width: '100%' }}>\r\n//             <h3>Analysis for Session: {selectedSession}</h3>\r\n//             {renderTable()}\r\n            \r\n//             {/* Back to Sessions Button */}\r\n//             <button \r\n//               onClick={handleBackToSessions} \r\n//               style={{\r\n//                 backgroundColor: '#A2C2E2', // Pastel blue color\r\n//                 color: '#fff',\r\n//                 padding: '10px 15px',\r\n//                 border: 'none',\r\n//                 borderRadius: '5px',\r\n//                 cursor: 'pointer',\r\n//                 marginTop: '20px',\r\n//                 display: 'block',\r\n//                 marginLeft: 'auto',\r\n//                 marginRight: 'auto'\r\n//               }}\r\n//             >\r\n//               Back to Sessions\r\n//             </button>\r\n//           </div>\r\n//         ) : (\r\n//           <div style={{ width: '30%', marginRight: '20px' }}>\r\n//             <h3>Sessions</h3>\r\n//             <ul style={{ listStyleType: 'none', padding: 0 }}>\r\n//               {sessions.map((session) => (\r\n//                 <li \r\n//                   key={session} \r\n//                   onClick={() => handleSessionClick(session)}\r\n//                   style={{ cursor: 'pointer', padding: '10px', border: '1px solid #ddd', marginBottom: '5px' }}\r\n//                 >\r\n//                   {session}\r\n//                 </li>\r\n//               ))}\r\n//             </ul>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default AdminApp;\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Pie } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\n\r\nfunction AdminApp() {\r\n  const [sessions, setSessions] = useState([]);\r\n  const [sessionDates, setSessionDates] = useState({});\r\n  const [selectedSession, setSelectedSession] = useState(null);\r\n  const [analysisData, setAnalysisData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchSessions();\r\n  }, []);\r\n\r\n  const fetchSessions = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/sessions');\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      const data = await response.json();\r\n      setSessions(data.sessions);\r\n      setSessionDates(data.sessionDates || {});\r\n    } catch (error) {\r\n      console.error('Error fetching sessions:', error);\r\n    }\r\n  };\r\n\r\n  const handleSessionClick = async (sessionId) => {\r\n    setSelectedSession(sessionId);\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/analyze/${sessionId}`);\r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          setAnalysisData({ imageAnalyses: [], overallAnalysis: { emotions: {} } });\r\n        } else {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n      }\r\n      const data = await response.json();\r\n      setAnalysisData(data);\r\n    } catch (error) {\r\n      console.error('Error analyzing session:', error);\r\n    }\r\n  };\r\n\r\n  const handleBackToSessions = () => {\r\n    setSelectedSession(null);\r\n    setAnalysisData(null);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString();\r\n  };\r\n\r\n  const renderTable = () => {\r\n    if (!analysisData || analysisData.imageAnalyses.length === 0) return null;\r\n\r\n    return (\r\n      <div style={{ overflowX: 'auto', marginTop: '20px' }}>\r\n        <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd' }}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Webcam Capture</th>\r\n              <th style={{ border: '1px solid #ddd', padding: '12px', backgroundColor: '#f2f2f2', textAlign: 'center' }}>Analysis</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {analysisData.imageAnalyses.map((analysis, index) => (\r\n              <tr key={index} style={{ borderBottom: '1px solid #ddd' }}>\r\n                <td style={{ border: '1px solid #ddd', padding: '12px', textAlign: 'center' }}>\r\n                  <img\r\n                    src={`http://localhost:5000/uploads/webcam_images/${selectedSession}/${analysis.imagePath}`}\r\n                    alt={`Webcam ${index}`}\r\n                    style={{ width: '200px', height: 'auto', borderRadius: '5px' }}\r\n                    loading=\"lazy\"\r\n                  />\r\n                </td>\r\n                <td style={{ border: '1px solid #ddd', padding: '12px' }}>\r\n                  <div style={{ \r\n                    backgroundColor: '#f8f9fa', \r\n                    padding: '10px', \r\n                    borderRadius: '5px',\r\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n                  }}>\r\n                    <h4 style={{ margin: '0 0 10px 0', color: '#333' }}>Emotion Analysis:</h4>\r\n                    {Object.entries(analysis.emotions).map(([emotion, value]) => (\r\n                      <div \r\n                        key={emotion} \r\n                        style={{ \r\n                          margin: '5px 0',\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          padding: '3px 0'\r\n                        }}\r\n                      >\r\n                        <span style={{ textTransform: 'capitalize' }}>{emotion}:</span>\r\n                        <span style={{ fontWeight: '500' }}>{parseFloat(value).toFixed(2)}%</span>\r\n                      </div>\r\n                    ))}\r\n                    <div style={{ \r\n                      marginTop: '10px', \r\n                      paddingTop: '10px', \r\n                      borderTop: '1px solid #dee2e6'\r\n                    }}>\r\n                      <strong>Dominant Emotion: </strong>\r\n                      <span style={{ \r\n                        color: '#007bff',\r\n                        textTransform: 'capitalize'\r\n                      }}>\r\n                        {analysis.dominantEmotion}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderPieChart = () => {\r\n    if (!analysisData || !analysisData.overallAnalysis || Object.keys(analysisData.overallAnalysis.emotions).length === 0) return null;\r\n\r\n    const emotions = analysisData.overallAnalysis.emotions;\r\n    const data = {\r\n      labels: Object.keys(emotions).map(emotion => emotion.charAt(0).toUpperCase() + emotion.slice(1)),\r\n      datasets: [{\r\n        data: Object.values(emotions).map(v => parseFloat(v)),\r\n        backgroundColor: [\r\n          '#FF6384', // red for angry\r\n          '#36A2EB', // blue for sad\r\n          '#FFCE56', // yellow for fear\r\n          '#4BC0C0', // teal for happy\r\n          '#9966FF', // purple for disgust\r\n          '#FF9F40', // orange for surprise\r\n          '#C9CBCF'  // gray for neutral\r\n        ],\r\n        borderWidth: 1\r\n      }]\r\n    };\r\n\r\n    const options = {\r\n      responsive: true,\r\n      plugins: {\r\n        legend: {\r\n          position: 'right',\r\n          labels: {\r\n            padding: 20,\r\n            font: {\r\n              size: 12\r\n            }\r\n          }\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Overall Emotion Distribution',\r\n          font: {\r\n            size: 16,\r\n            weight: 'bold'\r\n          },\r\n          padding: {\r\n            top: 10,\r\n            bottom: 30\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div style={{ \r\n        width: '100%', \r\n        maxWidth: '600px', \r\n        margin: '20px auto',\r\n        padding: '20px',\r\n        backgroundColor: 'white',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <Pie data={data} options={options} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSessionsList = () => (\r\n    <div style={{ width: '100%', maxWidth: '400px', marginRight: '20px' }}>\r\n      <h3 style={{ \r\n        marginBottom: '20px',\r\n        color: '#333',\r\n        borderBottom: '2px solid #007bff',\r\n        paddingBottom: '10px'\r\n      }}>\r\n        Local Sessions\r\n      </h3>\r\n      <div style={{ \r\n        maxHeight: '70vh',\r\n        overflowY: 'auto',\r\n        padding: '10px',\r\n        backgroundColor: '#f8f9fa',\r\n        borderRadius: '8px'\r\n      }}>\r\n        {sessions.length === 0 ? (\r\n          <p style={{ \r\n            textAlign: 'center', \r\n            color: '#6c757d',\r\n            padding: '20px',\r\n            backgroundColor: 'white',\r\n            borderRadius: '4px',\r\n            margin: '10px 0'\r\n          }}>\r\n            No local sessions found\r\n          </p>\r\n        ) : (\r\n          <ul style={{ listStyleType: 'none', padding: 0, margin: 0 }}>\r\n            {sessions.map((session) => (\r\n              <li\r\n                key={session}\r\n                onClick={() => handleSessionClick(session)}\r\n                style={{\r\n                  cursor: 'pointer',\r\n                  padding: '15px',\r\n                  backgroundColor: 'white',\r\n                  borderRadius: '4px',\r\n                  marginBottom: '10px',\r\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\r\n                  transition: 'all 0.2s ease',\r\n                  border: '1px solid #dee2e6'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(-2px)';\r\n                  e.currentTarget.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(0)';\r\n                  e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';\r\n                }}\r\n              >\r\n                <div style={{ fontWeight: '500', color: '#007bff' }}>{session}</div>\r\n                {sessionDates[session] && (\r\n                  <div style={{ \r\n                    fontSize: '0.85em', \r\n                    color: '#6c757d',\r\n                    marginTop: '5px'\r\n                  }}>\r\n                    Created: {formatDate(sessionDates[session])}\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div style={{ \r\n      padding: '30px', \r\n      maxHeight: '100vh', \r\n      overflowY: 'auto',\r\n      backgroundColor: '#f0f2f5'\r\n    }}>\r\n      <h2 style={{ \r\n        color: '#2c3e50',\r\n        marginBottom: '30px',\r\n        textAlign: 'center'\r\n      }}>\r\n        Emotion Analysis Dashboard\r\n      </h2>\r\n\r\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n        {selectedSession ? (\r\n          <div style={{ width: '100%' }}>\r\n            {renderPieChart()}\r\n            <h3 style={{ \r\n              margin: '20px 0',\r\n              color: '#2c3e50',\r\n              textAlign: 'center'\r\n            }}>\r\n              Detailed Analysis for Session: {selectedSession}\r\n            </h3>\r\n            {renderTable()}\r\n            <button\r\n              onClick={handleBackToSessions}\r\n              style={{\r\n                backgroundColor: '#007bff',\r\n                color: '#fff',\r\n                padding: '10px 20px',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n                marginTop: '20px',\r\n                display: 'block',\r\n                marginLeft: 'auto',\r\n                marginRight: 'auto',\r\n                transition: 'background-color 0.2s ease',\r\n                fontWeight: '500',\r\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n              }}\r\n              onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#0056b3'}\r\n              onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#007bff'}\r\n            >\r\n              ‚Üê Back to Sessions\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          renderSessionsList()\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminApp;\r\n"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,GAAG,QAAQ,iBAAiB;AACrC,OAAO,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAACW,eAAe,EAAEC,kBAAkB,CAAC,GAAGZ,QAAQ,CAAC,I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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}